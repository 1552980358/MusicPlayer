(function(t){function e(e){for(var n,s,l=e[0],r=e[1],d=e[2],u=0,f=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);c&&c(e);while(f.length)f.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,l=1;l<i.length;l++){var r=i[l];0!==o[r]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={app:0},a=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var c=r;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"01fd":function(t,e,i){"use strict";i("72d5")},"034f":function(t,e,i){"use strict";i("85ec")},"095d":function(t,e,i){"use strict";i.r(e);var n=i("2c7b"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"149f":function(t,e,i){},1612:function(t,e,i){"use strict";i.r(e);var n=i("f65d"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"22c1":function(t,e,i){},"2ab7":function(t,e,i){},"2c7b":function(t,e){t.exports={app:{div_file_seq:"Sequence",div_file_name:"File Name",div_file_size:"File Size",div_file_status:"Status",div_file_progress:"Progress",progress_waiting:"Waiting",progress_completed:"Completed",progress_failed:"Filed"},upload:{text_drop_above:"Release here to Select",text_drop_empty:"Click for selecting file(s) or dropping file(s) at here",btn_upload:"Upload",btn_remove:"Remove All",progress_uploading:"Uploading",btn_remove_selected:"Remove Selected"},download:{div_name:"Name",div_duration:"Duration",progress_downloading:"Downloading",div_download_selected:"Download Selected Audio"}}},4427:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i(1===t.currentPage?t.uploadPage:2===t.currentPage?t.downloadPage:t.indexPage,{tag:"component",on:{changePage:t.changePage}})],1)},a=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-index"},[i("div",{staticClass:"div-background"}),i("div",{staticClass:"div-box"},[i("h1",{staticClass:"h1-poem"},[t._v("人间能得几回闻")]),i("h1",{staticClass:"h1-poem"},[t._v("——此曲只应天上有")]),i("hr"),i("h2",{staticClass:"h2-button",on:{click:function(e){return t.changePage(1)}}},[t._v("Upload")]),i("h2",{staticClass:"h2-button",on:{click:function(e){return t.changePage(2)}}},[t._v("Download")])])])},l=[],r={name:"Index",data:function(){return{}},methods:{changePage:function(t){this.$emit("changePage",t)}}},d=r,c=(i("d063"),i("2877")),u=Object(c["a"])(d,s,l,!1,null,"0a589012",null),f=u.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-upload-root"},[i("DropFile",{ref:"drop-file",on:{dropFiles:t.updateFileList}}),i("div",{staticClass:"div-column-title-container"},[i("div",{staticClass:"div-column-title"},[i("div",{staticClass:"div-5"},[t._v(t._s(t.$t("app.div_file_seq")))]),i("div",{staticClass:"div-60"},[t._v(t._s(t.$t("app.div_file_name")))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.$t("app.div_file_size")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_status")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_progress")))])])]),i("FileList",{ref:"fileList",staticClass:"file-list"}),i("Footer",{ref:"footer",staticClass:"footer",on:{removeAllFiles:function(e){return t.updateFileList([])},upload:t.upload,back:t.back,removeSelected:t.removeSelected}})],1)},v=[],_=(i("d3b7"),i("a434"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"div-drop-area",class:t.hasDrop?"div-dropping":"div-drop",on:{click:t.selectFiles}},[i("input",{ref:"input-select",attrs:{type:"file",accept:"audio/*"},on:{change:function(e){return t.inputFiles(e)}}}),i("h1",[t._v(t._s(t.hasDrop?t.$t("upload.text_drop_above"):t.$t("upload.text_drop_empty")))])])}),m=[],h=(i("caad"),i("2532"),i("159b"),i("b0c0"),{name:"DropFile",data:function(){return{hasDrop:!1,fileList:[]}},methods:{dropEvent:function(t){var e=this;this.hasDrop=!1,t.stopPropagation(),t.preventDefault(),[].forEach.call(t.dataTransfer.files,(function(t){if(t.type.includes("audio")){var i=!1;e.fileList.forEach((function(e){0===e.name.localeCompare(t.name)&&(i=!0)})),i?console.log("File '"+t.name+"' exists, ignored."):e.fileList.push({file:t,name:t.name,size:t.size,upload:0,status:0,isSelected:!1})}else{var n=t.name.lastIndexOf(".");-1===n?console.log("File '"+t.name+"' with unknown type, ignored."):console.log("File '"+t.name+"' with type "+t.name.substring(n+1)+" is not the type of 'audio/*', ignored.")}}),!1),this.updateFiles()},selectFiles:function(){this.$refs["input-select"].click()},inputFiles:function(t){var e=this;[].forEach.call(t.target.files,(function(t){var i=!1;e.fileList.forEach((function(e){0===e.name.localeCompare(t.name)&&(i=!0)})),i?console.log("File '"+t.name+"' exists, ignored."):e.fileList.push({file:t,name:t.name,size:t.size,upload:0,status:0,isSelected:!1})}),!1),this.updateFiles()},updateFiles:function(){this.$emit("dropFiles",this.fileList)}},mounted:function(){var t=this,e=this.$refs["div-drop-area"];e.addEventListener("drop",this.dropEvent,!1),e.addEventListener("dragleave",(function(e){e.stopPropagation(),e.preventDefault(),t.hasDrop=!1})),e.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault(),t.hasDrop=!0})),e.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),t.hasDrop=!0}))}}),g=h,b=(i("ad2d"),Object(c["a"])(g,_,m,!1,null,"1de55053",null)),w=b.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.fileList,(function(t,e){return i("div",{key:t.name},[i("File",{attrs:{f:t,index:e}})],1)})),0)},x=[],S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.f.isSelected?"div-file-root-selected":"div-file-root",on:{click:function(e){t.f.isSelected=!t.f.isSelected}}},[i("div",{staticClass:"div-content"},[i("div",{staticClass:"div-5"},[t._v(t._s(t.index+1))]),i("div",{staticClass:"div-60"},[t._v(t._s(t.f.name))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.calculateSize(t.f.size)))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t(0===t.f.status?"app.progress_waiting":1===t.f.status?"upload.progress_uploading":2===t.f.status?"app.progress_completed":"app.progress_failed")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.f.upload+"%"))])])])},F=[],O=(i("b680"),{name:"File",props:["f","index"],data:function(){return{file:null,SIZE_UNITS:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},methods:{calculateSize:function(t){if(t<1024)return t+" B";var e=t,i=1;while((e/=1024)>1024)i++;return e.toFixed(2)+" "+this.SIZE_UNITS[i]}},mounted:function(){this.file=this.f}}),$=O,P=(i("be1b"),Object(c["a"])($,S,F,!1,null,"67c50b0d",null)),y=P.exports,L={name:"FileList",components:{File:y},data:function(){return{fileList:null}},methods:{updateFileList:function(t){this.fileList=t}}},E=L,A=Object(c["a"])(E,C,x,!1,null,"0c13ae07",null),D=A.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"div-footer-root"},[n("div",{staticClass:"div-back",on:{click:function(e){return t.$emit("back")}}},[n("img",{attrs:{src:i("ccfe")}})]),n("div",{staticClass:"div-table"},[n("div",{staticClass:"div-button",on:{click:function(e){return t.$emit("upload")}}},[t._v(t._s(t.$t("upload.btn_upload")))]),n("div",{staticClass:"div-button",on:{click:function(e){return t.$emit("removeAllFiles")}}},[t._v(t._s(t.$t("upload.btn_remove")))]),n("div",{staticClass:"div-button",on:{click:function(e){return t.$emit("removeSelected")}}},[t._v(t._s(t.$t("upload.btn_remove_selected")))])])])},T=[],j=i("bc3a"),B=i.n(j),z={name:"Footer",data:function(){return{}},methods:{uploadFile:function(t){if(0!==t.length){var e,i,n,o,a=window.location.origin;console.log("Host: "+a),n={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":a,"Access-Control-Allow-Methods":"POST,GET,OPTIONS","Access-Control-Allow-Headers":"*","Access-Control-Max-Age":"0"},t.forEach((function(t){console.log("========================================="),console.log("Upload File: "+t.name),e="/upload?fileName="+t.name,console.log("Target URL: "+e),i=new FormData,i.append("file",t.file),B()({url:e,method:"POST",headers:n,data:i,onUploadProgress:function(e){o=100*e.loaded/e.total,console.log("Upload '"+t.name+"' => "+o+"%"),t.status=1,t.upload=o}}).then((function(e){console.log("Upload '"+t.name+"' with response code "+e.status),t.status=2})).catch((function(e){console.log("Upload '"+t.name+"' with exception: "+e),t.status=-1}))}))}}}},U=z,I=(i("dbac"),Object(c["a"])(U,k,T,!1,null,"3b255dc0",null)),N=I.exports,M={name:"Upload",data:function(){return{fileList:null}},components:{Footer:N,FileList:D,DropFile:w},methods:{updateFileList:function(t){this.fileList=t,this.$refs.fileList.updateFileList(t),this.$refs["drop-file"].fileList=t},upload:function(){this.$refs.footer.uploadFile(this.fileList)},back:function(){this.$emit("changePage",0)},findSelected:function(){var t=!1,e=0;return this.fileList.some((function(i){if(i.isSelected)return t=!0,!0;e++})),t?e:-1},removeSelected:function(){var t;while(-1!==(t=this.findSelected()))this.fileList.splice(t,1)}}},R=M,q=(i("9842"),Object(c["a"])(R,p,v,!1,null,"a5b6c200",null)),G=q.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-download-root"},[i("div",{staticClass:"div-table-container"},[i("div",{staticClass:"div-table"},[i("div",{staticClass:"div-50"},[t._v(t._s(t.$t("download.div_name")))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.$t("download.div_duration")))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.$t("app.div_file_size")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_status")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_progress")))])])]),t._l(t.audioList,(function(t){return i("div",{key:t.id,staticClass:"div-list"},[i("Audio",{staticClass:"div-audio",attrs:{a:t}})],1)})),i("Footer",{staticClass:"footer",on:{back:function(e){return t.$emit("changePage",0)},downloadSelected:t.downloadSelected}})],2)},H=[],J=(i("ac1f"),i("5319"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.a.isSelected?"div-audio-root-selected":"div-audio-root",on:{click:function(e){t.a.isSelected=!t.a.isSelected}}},[i("div",{staticClass:"div-container-root"},[i("div",{staticClass:"div-container-50"},[i("img",{ref:"img",attrs:{src:t.imgSrc}}),i("div",{staticClass:"div-container-50-text-table"},[i("div",{staticClass:"div-container-50-text-table-cell"},[i("div",[t._v(t._s(t.a.title))]),i("div",[t._v(t._s(t.a.artist+" - "+t.a.album))])])])]),i("div",{staticClass:"div-text-container-15"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.calculateDuration(t.a.duration)))])]),i("div",{staticClass:"div-text-container-15"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.calculateSize(t.a.size)))])]),i("div",{staticClass:"div-text-container-10"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.$t(0===t.a.status?"app.progress_waiting":1===t.a.status?"download.progress_downloading":2===t.a.status?"app.progress_completed":"app.progress_failed")))])]),i("div",{staticClass:"div-text-container-10"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.a.download+"%"))])])])])}),K=[],Y=(i("a9e3"),i("25f0"),{name:"Audio",props:["a"],data:function(){return{audio:null,imgSrc:null,SIZE_UNITS:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},methods:{calculateSize:function(t){if(t<1024)return t+" B";var e=Number(t),i=1;while((e/=1024)>1024)i++;return e.toFixed(2)+" "+this.SIZE_UNITS[i]},prefix2Digit:function(t){return t<10?"0"+t.toFixed(0):t.toFixed(0)},prefix3Digit:function(t){return t<10?"00"+t.toString():t<99?"0"+t.toString():t.toString()},calculateDuration:function(t){var e=Number(t);return this.prefix2Digit(e/6e4)+":"+this.prefix2Digit(e/1e3%60)+"."+this.prefix3Digit(e%1e3)}},mounted:function(){this.audio=this.a,this.imgSrc="/require?type=art&audio="+this.a.id+"&album="+this.a.albumId}}),W=Y,Q=(i("7554"),Object(c["a"])(W,J,K,!1,null,"0ed4d71e",null)),V=Q.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"div-footer-root"},[n("div",{staticClass:"div-back",on:{click:function(e){return t.$emit("back")}}},[n("img",{attrs:{src:i("ccfe")}})]),n("div",{staticClass:"div-table"},[n("div",{staticClass:"div-button",on:{click:function(e){return t.$emit("downloadSelected")}}},[t._v(t._s(t.$t("download.div_download_selected")))])])])},tt=[],et={name:"Footer",methods:{}},it=et,nt=(i("bd62"),Object(c["a"])(it,X,tt,!1,null,"21e57237",null)),ot=nt.exports,at={name:"Download",components:{Footer:ot,Audio:V},data:function(){return{audioList:null}},mounted:function(){var t=this,e={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Methods":"POST,GET,OPTIONS","Access-Control-Allow-Headers":"*","Access-Control-Max-Age":"0"};B()({url:"require?type=list",method:"GET",headers:e}).then((function(e){t.audioList=[],e.data["list"].forEach((function(e){t.audioList.push({id:e["id"],title:e["title"],artist:e["artist"],album:e["album"],albumId:e["albumId"],duration:e["duration"],size:e["size"],status:0,download:0,isSelected:!1})}))}))},methods:{downloadSelected:function(){var t={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Methods":"POST,GET,OPTIONS","Access-Control-Allow-Headers":"*","Access-Control-Max-Age":"0"};this.audioList.forEach((function(e){e.isSelected&&B()({url:"/download?id="+e.id,headers:t,responseType:"blob",onDownloadProgress:function(t){e.status=1;var i=(100*t.loaded/t.total).toFixed(0);console.log("Download "+e.title+" => "+i+"%"),e.download=i}}).then((function(t){e.status=2;var i=t.data,n=t.headers,o=String(n["Content-Type"]).replace("audio/","."),a=e.artist+" - "+e.title+o,s=window.URL.createObjectURL(new Blob([i],{type:n["content-type"]})),l=document.createElement("a");l.href=s,l.download=a,l.style.display="none",document.body.appendChild(l),l.click(),l.parentNode.removeChild(l),window.URL.revokeObjectURL(s),console.log("Download "+e.title+" with response code: "+t.status)})).catch((function(t){console.log("Download "+e.title+" with exception: "+t),e.status=-1}))}))}}},st=at,lt=(i("01fd"),Object(c["a"])(st,Z,H,!1,null,"b7d9b456",null)),rt=lt.exports,dt={name:"App",data:function(){return{uploadFiles:null,currentPage:0,indexPage:f,uploadPage:G,downloadPage:rt}},components:{Download:rt,Upload:G,Index:f},methods:{changePage:function(t){this.currentPage=t}}},ct=dt,ut=(i("034f"),Object(c["a"])(ct,o,a,!1,null,null,null)),ft=ut.exports,pt=i("a925");n["a"].use(pt["a"]);var vt,_t,mt=new pt["a"]({locale:"zh",messages:{zh:i("8447"),en:i("9d77")}}),ht=mt,gt=Object(c["a"])(ht,vt,_t,!1,null,"90f9b186",null),bt=gt.exports;n["a"].config.productionTip=!1,new n["a"]({i18n:bt,render:function(t){return t(ft)}}).$mount("#app")},"5b2e":function(t,e,i){},"72d5":function(t,e,i){},7554:function(t,e,i){"use strict";i("5b2e")},"7be1":function(t,e,i){},8447:function(t,e,i){"use strict";i.r(e);var n=i("1612");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var a,s,l=i("2877"),r=Object(l["a"])(n["default"],a,s,!1,null,null,null);e["default"]=r.exports},"85ec":function(t,e,i){},9842:function(t,e,i){"use strict";i("4427")},"9d77":function(t,e,i){"use strict";i.r(e);var n=i("095d");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var a,s,l=i("2877"),r=Object(l["a"])(n["default"],a,s,!1,null,null,null);e["default"]=r.exports},ad2d:function(t,e,i){"use strict";i("2ab7")},b7c8:function(t,e,i){},bd62:function(t,e,i){"use strict";i("149f")},be1b:function(t,e,i){"use strict";i("22c1")},ccfe:function(t,e,i){t.exports=i.p+"img/back.2cdf7ceb.svg"},d063:function(t,e,i){"use strict";i("b7c8")},dbac:function(t,e,i){"use strict";i("7be1")},f65d:function(t,e){t.exports={app:{div_file_seq:"顺序",div_file_name:"文件名",div_file_size:"文件大小",div_file_status:"状态",div_file_progress:"进度",progress_waiting:"等待中",progress_completed:"完成",progress_failed:"失败"},upload:{text_drop_above:"释放文件以选中文件",text_drop_empty:"点击选择文件或拖动文件到此处",btn_upload:"上传",btn_remove:"删除全部",progress_uploading:"上传中",btn_remove_selected:"移除所选"},download:{div_name:"歌曲",div_duration:"时长",progress_downloading:"下载中",div_download_selected:"下载选中歌曲"}}}});
//# sourceMappingURL=app.4778f158.js.map