(function(t){function e(e){for(var n,s,l=e[0],r=e[1],d=e[2],u=0,f=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);c&&c(e);while(f.length)f.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,l=1;l<i.length;l++){var r=i[l];0!==a[r]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var c=r;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"095d":function(t,e,i){"use strict";i.r(e);var n=i("2c7b"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"0e60":function(t,e,i){"use strict";i("3695")},1612:function(t,e,i){"use strict";i.r(e);var n=i("f65d"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"2c7b":function(t,e){t.exports={app:{div_file_seq:"Sequence",div_file_name:"File Name",div_file_size:"File Size",div_file_status:"Status",div_file_progress:"Progress",progress_waiting:"Waiting",progress_completed:"Completed",progress_failed:"Filed"},upload:{text_drop_above:"Release here to Select",text_drop_empty:"Click for selecting file(s) or dropping file(s) at here",btn_upload:"Upload",btn_remove:"Remove All",progress_uploading:"Uploading"},download:{div_name:"Name",div_duration:"Duration",progress_downloading:"Downloading"}}},"329a":function(t,e,i){"use strict";i("3e71")},3695:function(t,e,i){},"3e71":function(t,e,i){},4340:function(t,e,i){"use strict";i("f817")},5341:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i(1===t.currentPage?t.uploadPage:2===t.currentPage?t.downloadPage:t.indexPage,{tag:"component",on:{changePage:t.changePage}})],1)},o=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-index"},[i("div",{staticClass:"div-background"}),i("div",{staticClass:"div-box"},[i("h1",{staticClass:"h1-poem"},[t._v("人间能得几回闻")]),i("h1",{staticClass:"h1-poem"},[t._v("——此曲只应天上有")]),i("hr"),i("h2",{staticClass:"h2-button",on:{click:function(e){return t.changePage(1)}}},[t._v("Upload")]),i("h2",{staticClass:"h2-button",on:{click:function(e){return t.changePage(2)}}},[t._v("Download")])])])},l=[],r={name:"Index",data:function(){return{}},methods:{changePage:function(t){this.$emit("changePage",t)}}},d=r,c=(i("d063"),i("2877")),u=Object(c["a"])(d,s,l,!1,null,"0a589012",null),f=u.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-upload-root"},[i("DropFile",{on:{dropFiles:t.updateFileList}}),i("div",{staticClass:"div-column-title-container"},[i("div",{staticClass:"div-column-title"},[i("div",{staticClass:"div-5"},[t._v(t._s(t.$t("app.div_file_seq")))]),i("div",{staticClass:"div-60"},[t._v(t._s(t.$t("app.div_file_name")))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.$t("app.div_file_size")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_status")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_progress")))])])]),i("FileList",{ref:"fileList",staticClass:"file-list"}),i("Footer",{ref:"footer",staticClass:"footer",on:{remove:t.removeFiles,upload:t.upload}})],1)},v=[],_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"div-drop-area",class:t.hasDrop?"div-dropping":"div-drop",on:{click:t.selectFiles}},[i("input",{ref:"input-select",attrs:{type:"file",accept:"audio/*"},on:{change:function(e){return t.inputFiles(e)}}}),i("h1",[t._v(t._s(t.hasDrop?t.$t("upload.text_drop_above"):t.$t("upload.text_drop_empty")))])])},h=[],g=(i("d3b7"),i("caad"),i("2532"),i("159b"),i("b0c0"),{name:"DropFile",data:function(){return{hasDrop:!1,fileList:[]}},methods:{dropEvent:function(t){var e=this;this.hasDrop=!1,t.stopPropagation(),t.preventDefault(),[].forEach.call(t.dataTransfer.files,(function(t){if(t.type.includes("audio")){var i=!1;e.fileList.forEach((function(e){0===e.name.localeCompare(t.name)&&(i=!0)})),i?console.log("File '"+t.name+"' exists, ignored."):e.fileList.push({file:t,name:t.name,size:t.size,upload:0,status:0})}else{var n=t.name.lastIndexOf(".");-1===n?console.log("File '"+t.name+"' with unknown type, ignored."):console.log("File '"+t.name+"' with type "+t.name.substring(n+1)+" is not the type of 'audio/*', ignored.")}}),!1),this.updateFiles()},selectFiles:function(){this.$refs["input-select"].click()},inputFiles:function(t){var e=this;[].forEach.call(t.target.files,(function(t){var i=!1;e.fileList.forEach((function(e){0===e.name.localeCompare(t.name)&&(i=!0)})),i?console.log("File '"+t.name+"' exists, ignored."):e.fileList.push({file:t,name:t.name,size:t.size,upload:0,status:0})}),!1),this.updateFiles()},updateFiles:function(){this.$emit("dropFiles",this.fileList)}},mounted:function(){var t=this,e=this.$refs["div-drop-area"];e.addEventListener("drop",this.dropEvent,!1),e.addEventListener("dragleave",(function(e){e.stopPropagation(),e.preventDefault(),t.hasDrop=!1})),e.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault(),t.hasDrop=!0})),e.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),t.hasDrop=!0}))}}),m=g,b=(i("4340"),Object(c["a"])(m,_,h,!1,null,"6d538b5a",null)),w=b.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.fileList,(function(t,e){return i("div",{key:t.name},[i("File",{attrs:{f:t,index:e}})],1)})),0)},x=[],F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-root"},[i("div",{staticClass:"div-content"},[i("div",{staticClass:"div-5"},[t._v(t._s(t.index+1))]),i("div",{staticClass:"div-60"},[t._v(t._s(t.f.name))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.calculateSize(t.f.size)))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t(0===t.f.status?"app.progress_waiting":1===t.f.status?"upload.progress_uploading":2===t.f.status?"app.progress_completed":"app.progress_failed")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.f.upload+"%"))])])])},O=[],P=(i("b680"),{name:"File",props:["f","index"],data:function(){return{file:null,SIZE_UNITS:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},methods:{calculateSize:function(t){if(t<1024)return t+" B";var e=t,i=1;while((e/=1024)>1024)i++;return e.toFixed(2)+" "+this.SIZE_UNITS[i]}},mounted:function(){this.file=this.f}}),y=P,L=(i("615d"),Object(c["a"])(y,F,O,!1,null,"5656a19c",null)),S=L.exports,$={name:"FileList",components:{File:S},data:function(){return{fileList:null}},methods:{updateFileList:function(t){this.fileList=t}}},E=$,D=Object(c["a"])(E,C,x,!1,null,"0c13ae07",null),A=D.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-footer-root"},[i("div",{staticClass:"div-table"},[i("div",{ref:"upload",staticClass:"div-button",on:{click:t.upload}},[t._v(t._s(t.$t("upload.btn_upload")))]),i("div",{ref:"remove",staticClass:"div-button",on:{click:t.remove}},[t._v(t._s(t.$t("upload.btn_remove")))])])])},j=[],B=i("bc3a"),z=i.n(B),U={name:"Footer",data:function(){return{}},methods:{upload:function(){this.$emit("upload")},uploadFile:function(t){if(0!==t.length){var e,i,n,a,o=window.location.origin;console.log("Host: "+o),n={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":o,"Access-Control-Allow-Methods":"POST,GET,OPTIONS","Access-Control-Allow-Headers":"*","Access-Control-Max-Age":"0"},t.forEach((function(t){console.log("========================================="),console.log("Upload File: "+t.name),e="/upload?fileName="+t.name,console.log("Target URL: "+e),i=new FormData,i.append("file",t.file),z()({url:e,method:"POST",headers:n,data:i,onUploadProgress:function(e){a=100*e.loaded/e.total,console.log("Upload '"+t.name+"' => "+a+"%"),t.status=1,t.upload=a}}).then((function(e){console.log("Upload '"+t.name+"' with response code "+e.status),t.status=2})).catch((function(e){console.log("Upload '"+t.name+"' with exception: "+e),t.status=-1}))}))}},remove:function(){this.$emit("remove")}}},k=U,I=(i("7262"),Object(c["a"])(k,T,j,!1,null,"6e6e3092",null)),N=I.exports,M={name:"Upload",data:function(){return{fileList:null}},components:{Footer:N,FileList:A,DropFile:w},methods:{updateFileList:function(t){this.fileList=t,this.$refs.fileList.updateFileList(t)},upload:function(){this.$refs.footer.uploadFile(this.fileList)},removeFiles:function(){this.updateFileList([])}}},R=M,q=(i("329a"),Object(c["a"])(R,p,v,!1,null,"1bb173f2",null)),G=q.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div-download-root"},[i("div",{staticClass:"div-table-container"},[i("div",{staticClass:"div-table"},[i("div",{staticClass:"div-50"},[t._v(t._s(t.$t("download.div_name")))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.$t("download.div_duration")))]),i("div",{staticClass:"div-15"},[t._v(t._s(t.$t("app.div_file_size")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_status")))]),i("div",{staticClass:"div-10"},[t._v(t._s(t.$t("app.div_file_progress")))])])]),t._l(t.audioList,(function(t){return i("div",{key:t.id},[i("Audio",{attrs:{a:t}})],1)}))],2)},H=[],J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"div-audio",staticClass:"div-audio-root",on:{click:t.download}},[i("div",{staticClass:"div-container-root"},[i("div",{staticClass:"div-container-50"},[i("img",{ref:"img",attrs:{src:t.imgSrc}}),i("div",{staticClass:"div-container-50-text-table"},[i("div",{staticClass:"div-container-50-text-table-cell"},[i("div",[t._v(t._s(t.a.title))]),i("div",[t._v(t._s(t.a.artist+" - "+t.a.album))])])])]),i("div",{staticClass:"div-text-container-10"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.calculateDuration(t.a.duration)))])]),i("div",{staticClass:"div-text-container-15"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.calculateSize(t.a.size)))])]),i("div",{staticClass:"div-text-container-10"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.$t(0===t.a.status?"app.progress_waiting":1===t.a.status?"download.progress_downloading":2===t.a.status?"app.progress_completed":"app.progress_failed")))])]),i("div",{staticClass:"div-text-container-10"},[i("div",{staticClass:"div-text"},[t._v(t._s(t.a.download+"%"))])])])])},K=[],Y=(i("a9e3"),i("25f0"),i("ac1f"),i("5319"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),{name:"Audio",props:["a"],data:function(){return{audio:null,imgSrc:null,SIZE_UNITS:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},methods:{calculateSize:function(t){if(t<1024)return t+" B";var e=Number(t),i=1;while((e/=1024)>1024)i++;return e.toFixed(2)+" "+this.SIZE_UNITS[i]},prefix2Digit:function(t){return t<10?"0"+t.toFixed(0):t.toFixed(0)},prefix3Digit:function(t){return t<10?"00"+t.toString():t<99?"0"+t.toString():t.toString()},calculateDuration:function(t){var e=Number(t);return this.prefix2Digit(e/6e4)+":"+this.prefix2Digit(e/1e3%60)+"."+this.prefix3Digit(e%1e3)},download:function(){var t=this,e={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Methods":"POST,GET,OPTIONS","Access-Control-Allow-Headers":"*","Access-Control-Max-Age":"0"};z()({url:"/download?id="+this.audio.id,headers:e,responseType:"blob",onDownloadProgress:function(e){t.audio.status=1;var i=(100*e.loaded/e.total).toFixed(0);console.log("Download "+t.audio.title+" => "+i+"%"),t.audio.download=i}}).then((function(e){t.audio.status=2;var i=e.data,n=e.headers,a=String(n["Content-Type"]).replace("audio/","."),o=t.audio.artist+" - "+t.audio.title+a,s=window.URL.createObjectURL(new Blob([i],{type:n["content-type"]})),l=document.createElement("a");l.href=s,l.download=o,l.style.display="none",document.body.appendChild(l),l.click(),l.parentNode.removeChild(l),window.URL.revokeObjectURL(s),console.log("Download "+t.audio.title+" with response code: "+e.status)})).catch((function(e){console.log("Download "+t.audio.title+" with exception: "+e),t.audio.status=-1}))}},mounted:function(){this.audio=this.a,this.imgSrc="/require?type=art&audio="+this.a.id+"&album="+this.a.albumId}}),W=Y,Q=(i("0e60"),Object(c["a"])(W,J,K,!1,null,"db7a745a",null)),V=Q.exports,X={name:"Download",components:{Audio:V},data:function(){return{audioList:null}},mounted:function(){var t=this,e={"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Methods":"POST,GET,OPTIONS","Access-Control-Allow-Headers":"*","Access-Control-Max-Age":"0"};z()({url:"require?type=list",method:"GET",headers:e}).then((function(e){t.audioList=[],e.data["list"].forEach((function(e){t.audioList.push({id:e["id"],title:e["title"],artist:e["artist"],album:e["album"],albumId:e["albumId"],duration:e["duration"],size:e["size"],status:0,download:0})}))}))}},tt=X,et=(i("c1d0"),Object(c["a"])(tt,Z,H,!1,null,"4954c212",null)),it=et.exports,nt={name:"App",data:function(){return{uploadFiles:null,currentPage:0,indexPage:f,uploadPage:G,downloadPage:it}},components:{Download:it,Upload:G,Index:f},methods:{changePage:function(t){this.currentPage=t}}},at=nt,ot=(i("034f"),Object(c["a"])(at,a,o,!1,null,null,null)),st=ot.exports,lt=i("a925");n["a"].use(lt["a"]);var rt,dt,ct=new lt["a"]({locale:"zh",messages:{zh:i("8447"),en:i("9d77")}}),ut=ct,ft=Object(c["a"])(ut,rt,dt,!1,null,"90f9b186",null),pt=ft.exports;n["a"].config.productionTip=!1,new n["a"]({i18n:pt,render:function(t){return t(st)}}).$mount("#app")},"615d":function(t,e,i){"use strict";i("645a")},"645a":function(t,e,i){},7262:function(t,e,i){"use strict";i("5341")},8447:function(t,e,i){"use strict";i.r(e);var n=i("1612");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);var o,s,l=i("2877"),r=Object(l["a"])(n["default"],o,s,!1,null,null,null);e["default"]=r.exports},"85ec":function(t,e,i){},"9d77":function(t,e,i){"use strict";i.r(e);var n=i("095d");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);var o,s,l=i("2877"),r=Object(l["a"])(n["default"],o,s,!1,null,null,null);e["default"]=r.exports},a1ad:function(t,e,i){},b7c8:function(t,e,i){},c1d0:function(t,e,i){"use strict";i("a1ad")},d063:function(t,e,i){"use strict";i("b7c8")},f65d:function(t,e){t.exports={app:{div_file_seq:"顺序",div_file_name:"文件名",div_file_size:"文件大小",div_file_status:"状态",div_file_progress:"进度",progress_waiting:"等待中",progress_completed:"完成",progress_failed:"失败"},upload:{text_drop_above:"释放文件以选中文件",text_drop_empty:"点击选择文件或拖动文件到此处",btn_upload:"上传",btn_remove:"删除全部",progress_uploading:"上传中"},download:{div_name:"歌曲",div_duration:"时长",progress_downloading:"下载中"}}},f817:function(t,e,i){}});
//# sourceMappingURL=app.ac7d01bb.js.map